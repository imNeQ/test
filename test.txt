(() => {
  const userEl = document.querySelector('input[name="username"]');
  const passEl = document.querySelector('input[name="password"]');
  const submitEl = document.querySelector('input[name="submit"][type="submit"]');

  if (!userEl || !passEl || !submitEl) {
    console.error("Nie znaleziono pól formularza.");
    return;
  }

  let attempt = 0;
  const maxAttempts = 5;

  const trySubmit = () => {
    attempt++;
    userEl.value = "xx";
    passEl.value = "xx";

    ["input", "change"].forEach(evt => {
      userEl.dispatchEvent(new Event(evt, { bubbles: true }));
      passEl.dispatchEvent(new Event(evt, { bubbles: true }));
    });

    console.log(`Próba ${attempt} z ${maxAttempts}`);
    submitEl.click(); // klikniecie powoduje wysłanie formularza

    if (attempt < maxAttempts) {
      // jeśli formularz NIE przeładowuje strony, możesz ustawić timeout
      setTimeout(trySubmit, 1000); 
    }
  };

  trySubmit();
})();
